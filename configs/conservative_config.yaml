# Conservative Risk Configuration
# Capital preservation via trend protection - Lower drawdowns prioritized over maximum returns
# Based on backtest results: 259% return, -23.9% max drawdown, 2.09x W/L ratio, 73.8% monthly win rate

config_name: "conservative"
config_version: "1.0"
description: "Conservative: MA_Crossdown ENABLED - Protects capital with trend-following exits. Superior risk management: -23.9% max drawdown vs -39.4% without MA protection. Higher thresholds (6.5), no time stops, strict regime filters (SPY+sector). Best for: Capital preservation, risk-averse traders, smaller accounts."

risk_management:
  account_value: 100000
  risk_pct_per_trade: 1.0  # Standardized across all configs
  stop_strategy: "static"
  time_stop_bars: 0  # Disabled - let winners run longer
  
  stop_params:
    static:
      enabled: true
    vol_regime:
      low_vol_mult: 1.5
      normal_vol_mult: 2.0
      high_vol_mult: 2.5
      low_threshold: -0.5
      high_threshold: 0.5
    atr_dynamic:
      multiplier: 2.0
      min_multiplier: 1.5
      max_multiplier: 3.0
    pct_trail:
      trail_pct: 8.0
      activation_r: 1.0
    time_decay:
      day_5_mult: 2.5
      day_10_mult: 2.0
      day_15_mult: 1.5

transaction_costs:
  slippage_pct: 0.05        # 5 basis points per side (conservative for liquid stocks)
  commission_per_share: 0.0  # $0 if zero-commission broker, else 0.005
  enabled: true              # Master switch to disable costs for testing

signal_thresholds:
  entry:
    moderate_buy_pullback: 6.5  # Higher threshold for better quality
    stealth_accumulation: 4.5
    strong_buy: 6.5
    volume_breakout: 6.5
  exit:
    momentum_exhaustion: 5.0
    profit_taking: 5.0
    distribution_warning: 5.0
    ma_crossdown: 5.0  # Moving average crossdown exit
  enabled_entry_signals:
    - "moderate_buy_pullback"
  enabled_exit_signals:
    - "momentum_exhaustion"
    - "profit_taking"
    - "distribution_warning"
    - "ma_crossdown"

exit_signal_params:
  ma_crossdown:
    enabled: true  # ENABLED: Trend protection cuts losses early
    ma_period: 48  # Use 48 instead of 50 to avoid crowd behavior
    confirmation_days: 1  # 1=immediate, 2=two-day confirmation
    buffer_pct: 0.0  # No buffer (0.5 would add 0.5% buffer to reduce whipsaws)
    # Rationale: MA_Crossdown provides trend-following protection
    # Backtest shows: -23.9% max drawdown vs -39.4% without protection
    # Creates 59% more trades by exiting earlier (1747 vs 1099 trades)
    # Superior W/L ratio: 2.09x vs 1.29x (cuts losses, lets winners run)

regime_filters:
  enable_spy_regime: true
  enable_sector_regime: true
  require_both_regimes: true  # Strict regime requirements
  sector_mapping_file: "ticker_lists/sector_mappings.csv"

profit_management:
  enable_profit_scaling: true
  profit_target_r: 2.0
  profit_exit_pct: 0.5
  enable_trailing_stop: true
  trail_lookback_bars: 10

max_loss:
  enable_max_loss: false
  max_loss_pct: 20.0

backtest:
  start_date: null
  end_date: null
  lookback_months: 36
  generate_charts: true
  chart_save_dir: "backtest_results"
  generate_trade_log: true
